{
  "prdName": "invocation-flow-migration",
  "tasks": [
    {
      "id": "db-1",
      "category": "db",
      "description": "Add spriteUrl and spritePassword columns to opencodeSessions table",
      "steps": [
        "opencodeSessions table has spriteUrl text column",
        "opencodeSessions table has spritePassword text column",
        "Migration file exists and applies cleanly"
      ],
      "passes": false
    }
  ],
  "context": {
    "patterns": [
      "Manifest card buttons: components/manifest/manifest-card.tsx:459-510",
      "Manifest delete with gnostic dialog: components/manifest/manifest-card.tsx:115-125",
      "Sprite destruction: lib/core/manifest/delete-manifest-action.ts",
      "Sprite spawning: lib/core/sprites/spawn-sprite.ts"
    ],
    "keyFiles": [
      "lib/services/db/schema.ts",
      "lib/core/task/execute-task-action.ts",
      "lib/core/sprites/spawn-sprite.ts",
      "app/api/webhooks/sprite/[taskId]/route.ts",
      "app/(dashboard)/rituals/[id]/board-client.tsx",
      "components/invocations/task-detail-modal.tsx"
    ],
    "nonGoals": [
      "Auto-cleanup of old sprites",
      "Sprite sharing between tasks",
      "Comment migration"
    ]
  }
}
