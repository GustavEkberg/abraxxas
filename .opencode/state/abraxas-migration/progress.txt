# Progress Log

PRD: abraxas-migration
Started: 2026-01-19

## Codebase Patterns

<!-- Consolidate reusable patterns here -->

---

## Task - setup-1

- Added @dnd-kit/core, @dnd-kit/sortable, @dnd-kit/utilities, date-fns dependencies
- Files changed: package.json, pnpm-lock.yaml
- **Learnings:** Type checking passes for new deps, old_repo contains reference code with expected errors

## Task - db-1

- Added six pgEnums to schema.ts: taskStatusEnum, taskExecutionStateEnum, taskTypeEnum, taskModelEnum, sessionStatusEnum, executionModeEnum
- Files changed: lib/services/db/schema.ts
- **Learnings:** Import pgEnum from drizzle-orm/pg-core, all enum declarations precede table definitions, snake_case for enum names in DB

## Task - db-2

- Added projects table with id, userId (FK), name, description, repositoryUrl, encryptedGithubToken, agentsMdContent, createdAt, updatedAt
- Foreign key to user.id with cascade delete
- Files changed: lib/services/db/schema.ts
- **Learnings:** Table follows standard pattern: cuid primary key, notNull constraints, cascade delete on FK, $onUpdate for updatedAt

## Task - db-3

- Added tasks table with id, projectId (FK), title, description, type (enum), model (enum), status (enum), executionState (enum), branchName, completedAt, createdAt, updatedAt
- Foreign key to projects.id with cascade delete
- Status defaults to 'abyss', executionState defaults to 'idle'
- Files changed: lib/services/db/schema.ts
- **Learnings:** Enum columns reference pgEnum definitions, default values set with .default(), nullable fields omit .notNull()
